# –ú–æ–¥—É–ª—å 10. –î–µ–ø–ª–æ–π —Å–∞–π—Ç–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä

# –§–∏–Ω–∞–ª—å–Ω—ã–π —ç—Ç–∞–ø: –ø–µ—Ä–µ–≤–æ–¥ —Å–∞–π—Ç–∞ –Ω–∞ HTTPS (SSL-—Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç)

–ö —ç—Ç–æ–º—É –º–æ–º–µ–Ω—Ç—É –º—ã —Å –≤–∞–º–∏ –ø—Ä–æ—à–ª–∏ –ø–æ—á—Ç–∏ –≤–µ—Å—å –ø—É—Ç—å –¥–µ–ø–ª–æ—è Django-–ø—Ä–æ–µ–∫—Ç–∞ **cinemahub** –Ω–∞ –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–π —Å–µ—Ä–≤–µ—Ä:

* –ø—Ä–æ–µ–∫—Ç —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç –Ω–∞ VPS;
* Django-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞–ø—É—â–µ–Ω–æ —á–µ—Ä–µ–∑ **Gunicorn**;
* **Nginx** –Ω–∞—Å—Ç—Ä–æ–µ–Ω –∫–∞–∫ —Ä–µ–≤–µ—Ä—Å-–ø—Ä–æ–∫—Å–∏;
* –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Ä–∞–±–æ—Ç–∞—é—Ç **static** –∏ **media** —Ñ–∞–π–ª—ã;
* —Å–∞–π—Ç –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –ø–æ –æ–±—ã—á–Ω–æ–º—É HTTP-–ø—Ä–æ—Ç–æ–∫–æ–ª—É.

–û–¥–Ω–∞–∫–æ –≤ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–º –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–µ —ç—Ç–æ–≥–æ —É–∂–µ –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ.

–ï—Å–ª–∏ —Å–∞–π—Ç –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –ø–æ –∞–¥—Ä–µ—Å—É –≤–∏–¥–∞:

```
http://cinemahub.ru
```

–±—Ä–∞—É–∑–µ—Ä –ø–æ–º–µ—á–∞–µ—Ç –µ–≥–æ –∫–∞–∫ **–Ω–µ–±–µ–∑–æ–ø–∞—Å–Ω—ã–π**, –∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –≤–∏–¥—è—Ç —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–µ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ. –ë–æ–ª–µ–µ —Ç–æ–≥–æ:

* –±—Ä–∞—É–∑–µ—Ä—ã –º–æ–≥—É—Ç –±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å —á–∞—Å—Ç—å —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞;
* –ø–æ–∏—Å–∫–æ–≤—ã–µ —Å–∏—Å—Ç–µ–º—ã (Google, –Ø–Ω–¥–µ–∫—Å) –ø–æ–Ω–∏–∂–∞—é—Ç —Å–∞–π—Ç –≤ –≤—ã–¥–∞—á–µ;
* –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –∏ –ø–µ—Ä–µ–¥–∞—á–∞ –¥–∞–Ω–Ω—ã—Ö –ø—Ä–æ–∏—Å—Ö–æ–¥—è—Ç –±–µ–∑ —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è.

–ù–∞—à–∞ –∑–∞–¥–∞—á–∞ ‚Äî **–ø–µ—Ä–µ–≤–µ—Å—Ç–∏ —Å–∞–π—Ç –Ω–∞ HTTPS**, –ø–æ–¥–∫–ª—é—á–∏–≤ **SSL-—Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç**.

---

## –ß—Ç–æ —Ç–∞–∫–æ–µ SSL –∏ –æ—Ç–∫—É–¥–∞ –º—ã –µ–≥–æ –≤–æ–∑—å–º–µ–º

SSL-—Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç ‚Äî —ç—Ç–æ —Ü–∏—Ñ—Ä–æ–≤–æ–π —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç, –∫–æ—Ç–æ—Ä—ã–π:

* —à–∏—Ñ—Ä—É–µ—Ç –¥–∞–Ω–Ω—ã–µ –º–µ–∂–¥—É –±—Ä–∞—É–∑–µ—Ä–æ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏ —Å–µ—Ä–≤–µ—Ä–æ–º;
* –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç, —á—Ç–æ –¥–æ–º–µ–Ω –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–∏—Ç –≤–∞–º;
* –ø–æ–∑–≤–æ–ª—è–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø—Ä–æ—Ç–æ–∫–æ–ª **https://**.

–ë–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ SSL-—Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤ —è–≤–ª—è—é—Ç—Å—è –ø–ª–∞—Ç–Ω—ã–º–∏, –æ–¥–Ω–∞–∫–æ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –±–µ—Å–ø–ª–∞—Ç–Ω—ã–π –∏ –ø–æ–ª–Ω–æ—Å—Ç—å—é –ª–µ–≥–∞–ª—å–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç ‚Äî —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã –æ—Ç —Ü–µ–Ω—Ç—Ä–∞ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ **Let‚Äôs Encrypt**:

[https://letsencrypt.org/ru/](https://letsencrypt.org/ru/)

–≠—Ç–∏ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã:

* –±–µ—Å–ø–ª–∞—Ç–Ω—ã;
* –¥–µ–π—Å—Ç–≤—É—é—Ç **90 –¥–Ω–µ–π**;
* –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–æ–¥–ª–µ–≤–∞—é—Ç—Å—è;
* –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –º–∏–ª–ª–∏–æ–Ω–∞–º–∏ —Å–∞–π—Ç–æ–≤ –ø–æ –≤—Å–µ–º—É –º–∏—Ä—É.

---

## Certbot ‚Äî –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π —Ä–∞–±–æ—Ç—ã —Å SSL

–ß—Ç–æ–±—ã –Ω–µ –≤—ã–ø—É—Å–∫–∞—Ç—å –∏ –Ω–µ –æ–±–Ω–æ–≤–ª—è—Ç—å —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã –≤—Ä—É—á–Ω—É—é, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —É—Ç–∏–ª–∏—Ç–∞ **Certbot**:

[https://certbot.eff.org/pages/about](https://certbot.eff.org/pages/about)

Certbot:

* —Å–∞–º –ø–æ–ª—É—á–∞–µ—Ç SSL-—Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç;
* –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç Nginx;
* —É–º–µ–µ—Ç –ø—Ä–æ–¥–ª–µ–≤–∞—Ç—å —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã –±–µ–∑ –Ω–∞—à–µ–≥–æ —É—á–∞—Å—Ç–∏—è.

–ú—ã –±—É–¥–µ–º —Ä–∞–±–æ—Ç–∞—Ç—å –∏–º–µ–Ω–Ω–æ —Å –Ω–∏–º.

---

## –®–∞–≥ 1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Certbot –Ω–∞ —Å–µ—Ä–≤–µ—Ä

–ü–æ–¥–∫–ª—é—á–∞–µ–º—Å—è –∫ —Å–µ—Ä–≤–µ—Ä—É –ø–æ SSH –∏ –≤—ã–ø–æ–ª–Ω—è–µ–º –∫–æ–º–∞–Ω–¥—É:

```bash
sudo apt install certbot python3-certbot-nginx -y
```

**–ß—Ç–æ –∑–¥–µ—Å—å –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç**:

* `certbot` ‚Äî –æ—Å–Ω–æ–≤–Ω–∞—è —É—Ç–∏–ª–∏—Ç–∞;
* `python3-certbot-nginx` ‚Äî –º–æ–¥—É–ª—å, –∫–æ—Ç–æ—Ä—ã–π **–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏–Ω—Ç–µ–≥—Ä–∏—Ä—É–µ—Ç—Å—è —Å Nginx** –∏ –ø—Ä–∞–≤–∏—Ç –µ–≥–æ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é.

–ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∫–æ–º–∞–Ω–¥—ã Certbot –±—É–¥–µ—Ç —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –∏ –≥–æ—Ç–æ–≤ –∫ —Ä–∞–±–æ—Ç–µ.

---

## –®–∞–≥ 2. –ü–æ–ª—É—á–µ–Ω–∏–µ SSL-—Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞ –¥–ª—è –¥–æ–º–µ–Ω–∞

–¢–µ–ø–µ—Ä—å –∑–∞–ø—É—Å–∫–∞–µ–º –ø—Ä–æ—Ü–µ—Å—Å –≤—ã–ø—É—Å–∫–∞ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞.
–í–º–µ—Å—Ç–æ `cinemahub.ru` **—É–∫–∞–∂–∏—Ç–µ —Å–≤–æ–π –¥–æ–º–µ–Ω**:

```bash
sudo certbot --nginx -d cinemahub.ru
```

### –ß—Ç–æ –≤—ã —É–≤–∏–¥–∏—Ç–µ –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ

1. Certbot –ø–æ–ø—Ä–æ—Å–∏—Ç —É–∫–∞–∑–∞—Ç—å **email**
   –£–∫–∞–∑—ã–≤–∞–π—Ç–µ —Ä–µ–∞–ª—å–Ω—ã–π –∞–¥—Ä–µ—Å ‚Äî –Ω–∞ –Ω–µ–≥–æ –º–æ–≥—É—Ç –ø—Ä–∏—Ö–æ–¥–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –ø—Ä–æ–±–ª–µ–º–∞—Ö —Å —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–º.

2. –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ —É—Å–ª–æ–≤–∏–π –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
   –í–≤–æ–¥–∏–º `y`.

3. –í–æ–ø—Ä–æ—Å –æ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–∏ HTTP ‚Üí HTTPS
   **–°–æ–≥–ª–∞—à–∞–µ–º—Å—è**, –≤—ã–±–∏—Ä–∞—è –≤–∞—Ä–∏–∞–Ω—Ç —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º —Ä–µ–¥–∏—Ä–µ–∫—Ç–æ–º.

–ï—Å–ª–∏ –≤—Å–µ –ø—Ä–æ—à–ª–æ —É—Å–ø–µ—à–Ω–æ, –≤—ã —É–≤–∏–¥–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ —Ç–æ–º, —á—Ç–æ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç –≤—ã–¥–∞–Ω.

---

### –ï—Å–ª–∏ –≤–æ–∑–Ω–∏–∫–∞–µ—Ç –æ—à–∏–±–∫–∞ `Invalid response from http://www.cinemahub.ru/.well-known/acme-challenge/`:

–°–∫–æ—Ä–µ–µ –≤—Å–µ–≥–æ —ç—Ç–æ –ø—Ä–æ–±–ª–µ–º–∞ **–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ Nginx + Django/Gunicorn**.

**Let‚Äôs Encrypt —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–∞–∫**:

1. Certbot –≥–æ–≤–æ—Ä–∏—Ç Nginx:
   ¬´–†–∞–∑—Ä–µ—à–∏ –º–Ω–µ –≤—Ä–µ–º–µ–Ω–Ω–æ –æ—Ç–¥–∞–≤–∞—Ç—å —Ñ–∞–π–ª—ã –∏–∑
   `/.well-known/acme-challenge/`¬ª
2. Let‚Äôs Encrypt –∑–∞—Ö–æ–¥–∏—Ç –ø–æ HTTP (–Ω–µ HTTPS!) –∏ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Ñ–∞–π–ª
3. –ï—Å–ª–∏ —Ñ–∞–π–ª –æ—Ç–¥–∞–ª—Å—è ‚Äî –¥–æ–º–µ–Ω –ø–æ–¥—Ç–≤–µ—Ä–∂–¥—ë–Ω

–£ —Ç–µ–±—è —à–∞–≥ **2 –ø–∞–¥–∞–µ—Ç —Å 500**, –∑–Ω–∞—á–∏—Ç:

> Nginx –ø—ã—Ç–∞–µ—Ç—Å—è –ø—Ä–æ–∫—Å–∏—Ä–æ–≤–∞—Ç—å –∑–∞–ø—Ä–æ—Å –≤ Gunicorn,
> –∞ Gunicorn –ª–∏–±–æ –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç, –ª–∏–±–æ –ø–∞–¥–∞–µ—Ç, –ª–∏–±–æ Django –ª–æ–º–∞–µ—Ç—Å—è.

---

–°–∞–º–∞—è —á–∞—Å—Ç–∞—è –ø—Ä–∏—á–∏–Ω–∞ –≤ Django-–ø—Ä–æ–µ–∫—Ç–∞—Ö, –∫–æ–≥–¥–∞ `DEBUG = False`, –Ω–æ `ALLOWED_HOSTS` –Ω–∞—Å—Ç—Ä–æ–µ–Ω –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ. Certbot –¥–µ–ª–∞–µ—Ç HTTP-–∑–∞–ø—Ä–æ—Å **–∫ –¥–æ–º–µ–Ω—É**, –∞ –Ω–µ –∫ localhost.

–î–æ–±–∞–≤—å—Ç–µ –≤ `ALLOWED_HOSTS` –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏–µ –∞–¥—Ä–µ—Å–∞:

```python
ALLOWED_HOSTS = [
    'ipotnin.ru',
    'www.ipotnin.ru',
    '5.101.152.216',   # IP –≤–∞—à–µ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞ ‚Äî –í–ê–ñ–ù–û
    'localhost',
    '127.0.0.1',
]
```

–ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ **–ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ Gunicorn**:

```bash
sudo systemctl restart gunicorn
```

---

–ü–µ—Ä–µ–¥ –ø–æ–≤—Ç–æ—Ä–Ω–æ–π –ø–æ–ø—ã—Ç–∫–æ–π Certbot **–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û** –ø—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤ –±—Ä–∞—É–∑–µ—Ä–µ –ø–æ–∫–∞ —á–µ—Ä–µ–∑ –ø—Ä–æ—Ç–æ–∫–æ–ª http: `http://cinemahub.ru`.

---

–î–∞–ª–µ–µ –ø—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç–∞—Ç—É—Å Gunicorn

```bash
sudo systemctl status gunicorn
```

–ï—Å–ª–∏ –≤–∏–¥–∏—à—å:

* `active (running)` ‚Äî –æ–∫
* `failed` / `exit-code` ‚Äî Certbot –Ω–µ —Å–º–æ–∂–µ—Ç –ø—Ä–æ–π—Ç–∏

### –ï—Å–ª–∏ Certbot –≤—Å—ë —Ä–∞–≤–Ω–æ –ø–∞–¥–∞–µ—Ç, –¥–µ–ª–∞–µ–º **—Ä—É—á–Ω—É—é —Å—Ç—Ä–∞—Ö–æ–≤–∫—É**.

–û—Ç–∫—Ä–æ–π –∫–æ–Ω—Ñ–∏–≥ `Nginx` –ø—Ä–æ–µ–∫—Ç–∞:

```bash
sudo nano /etc/nginx/sites-available/myproject
```

**–í–ù–£–¢–†–ò `server {}` –î–û `location / {` –¥–æ–±–∞–≤—å:**

```nginx
location ^~ /.well-known/acme-challenge/ {
    root /var/www/html;
    allow all;
}
```

–ü–æ–ª–Ω—ã–π –ø–æ—Ä—è–¥–æ–∫ –≤–∞–∂–µ–Ω ‚Äî —ç—Ç–æ—Ç –±–ª–æ–∫ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å **–≤—ã—à–µ –ø—Ä–æ–∫—Å–∏**.

–°–æ–∑–¥–∞–π –ø–∞–ø–∫—É:

```bash
sudo mkdir -p /var/www/html/.well-known/acme-challenge
sudo chmod -R 755 /var/www/html
```

–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏ Nginx:

```bash
sudo nginx -t
sudo systemctl reload nginx
```

---

## –®–∞–≥ 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ –≤ –±—Ä–∞—É–∑–µ—Ä–µ

–¢–µ–ø–µ—Ä—å –æ—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ:

```
https://cinemahub.ru
```

–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:

* —Å–∞–π—Ç –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –ø–æ HTTPS;
* –≤ –∞–¥—Ä–µ—Å–Ω–æ–π —Å—Ç—Ä–æ–∫–µ ‚Äî **–∑–∞–º–æ–∫**;
* –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–π –æ –Ω–µ–±–µ–∑–æ–ø–∞—Å–Ω–æ–º —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–∏ –Ω–µ—Ç.

–¢–∞–∫–∂–µ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ:

```
http://cinemahub.ru
```

–û–Ω –¥–æ–ª–∂–µ–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è—Ç—å –Ω–∞ HTTPS.

–ù–∞ —ç—Ç–æ–º —ç—Ç–∞–ø–µ **Django-–Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö (PostgreSQL / SQLite) –Ω–µ –∏–º–µ—é—Ç –∑–Ω–∞—á–µ–Ω–∏—è** ‚Äî SSL —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ —É—Ä–æ–≤–Ω–µ Nginx.

---

## –®–∞–≥ 4. –ß—Ç–æ –∏–º–µ–Ω–Ω–æ –∏–∑–º–µ–Ω–∏–ª Certbot

–í–∞–∂–Ω–æ –ø–æ–Ω–∏–º–∞—Ç—å, —á—Ç–æ –ø—Ä–æ–∏–∑–æ—à–ª–æ ¬´–ø–æ–¥ –∫–∞–ø–æ—Ç–æ–º¬ª.

Certbot:

* –¥–æ–±–∞–≤–∏–ª SSL-–Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é Nginx;
* —Å–æ–∑–¥–∞–ª –Ω–æ–≤—ã–µ `server`-–±–ª–æ–∫–∏ –¥–ª—è `listen 443 ssl`;
* –ø—Ä–æ–ø–∏—Å–∞–ª –ø—É—Ç–∏ –∫ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞–º Let‚Äôs Encrypt;
* –¥–æ–±–∞–≤–∏–ª —Ä–µ–¥–∏—Ä–µ–∫—Ç —Å HTTP –Ω–∞ HTTPS.

–í—ã –º–æ–∂–µ—Ç–µ –æ—Ç–∫—Ä—ã—Ç—å —Ñ–∞–π–ª:

```bash
/etc/nginx/sites-available/myproject
```

–∏ —É–≤–∏–¥–µ—Ç—å, —á—Ç–æ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Å—Ç–∞–ª–∞ –∑–∞–º–µ—Ç–Ω–æ –±–æ–ª—å—à–µ ‚Äî —ç—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ.

---

## –®–∞–≥ 5. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø—Ä–æ–¥–ª–µ–Ω–∏–µ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞

–°–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã Let‚Äôs Encrypt –¥–µ–π—Å—Ç–≤—É—é—Ç **90 –¥–Ω–µ–π**, –Ω–æ –º—ã –Ω–µ –±—É–¥–µ–º –ø—Ä–æ–¥–ª–µ–≤–∞—Ç—å –∏—Ö –≤—Ä—É—á–Ω—É—é.

Certbot —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç —Å–∏—Å—Ç–µ–º–Ω—ã–π —Ç–∞–π–º–µ—Ä:

```bash
sudo systemctl status certbot.timer
```

–ï—Å–ª–∏ –≤—ã –≤–∏–¥–∏—Ç–µ —Å—Ç–∞—Ç—É—Å `active`, –∑–Ω–∞—á–∏—Ç:

* —Å–µ—Ä–≤–∏—Å –∑–∞–ø—É—â–µ–Ω;
* —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç –±—É–¥–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–æ–¥–ª–µ–≤–∞—Ç—å—Å—è;
* –Ω–∏–∫–∞–∫–∏—Ö –¥–µ–π—Å—Ç–≤–∏–π –æ—Ç –≤–∞—Å –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è.

---

## –®–∞–≥ 6. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –º–µ—Ö–∞–Ω–∏–∑–º–∞ –ø—Ä–æ–¥–ª–µ–Ω–∏—è

–ß—Ç–æ–±—ã —É–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø—Ä–æ–¥–ª–µ–Ω–∏–µ —Ç–æ—á–Ω–æ —Å—Ä–∞–±–æ—Ç–∞–µ—Ç, –≤—ã–ø–æ–ª–Ω–∏–º —Ç–µ—Å—Ç:

```bash
sudo certbot renew --dry-run
```

üìå –≠—Ç–æ **—Å–∏–º—É–ª—è—Ü–∏—è –ø—Ä–æ–¥–ª–µ–Ω–∏—è**, —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç —Ä–µ–∞–ª—å–Ω–æ –Ω–µ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è.

–ï—Å–ª–∏ –∫–æ–º–∞–Ω–¥–∞ –∑–∞–≤–µ—Ä—à–∏–ª–∞—Å—å **–±–µ–∑ –æ—à–∏–±–æ–∫**, –∑–Ω–∞—á–∏—Ç:

* –ø—Ä–∏ —Ä–µ–∞–ª—å–Ω–æ–º –∏—Å—Ç–µ—á–µ–Ω–∏–∏ —Å—Ä–æ–∫–∞ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç –ø—Ä–æ–¥–ª–∏—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏;
* —Å–∞–π—Ç –Ω–µ ¬´—É–ø–∞–¥–µ—Ç¬ª —á–µ—Ä–µ–∑ 90 –¥–Ω–µ–π.

---

## –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –∏ –∏—Ö –ø—Ä–∏—á–∏–Ω—ã

### ‚ùå Certbot –Ω–µ –º–æ–∂–µ—Ç –ø–æ–ª—É—á–∏—Ç—å —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç

–ü—Ä–∏—á–∏–Ω—ã:

* –¥–æ–º–µ–Ω –Ω–µ —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ IP —Å–µ—Ä–≤–µ—Ä–∞;
* –ø–æ—Ä—Ç 80 –∏–ª–∏ 443 –∑–∞–∫—Ä—ã—Ç firewall‚Äô–æ–º;
* Nginx –Ω–µ –∑–∞–ø—É—â–µ–Ω.

–ü—Ä–æ–≤–µ—Ä—å—Ç–µ:

```bash
sudo systemctl status nginx
sudo ufw status
```

---

### ‚ùå HTTPS —Ä–∞–±–æ—Ç–∞–µ—Ç, –Ω–æ —Å–∞–π—Ç –Ω–µ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è

–ü—Ä–∏—á–∏–Ω—ã:

* –æ—à–∏–±–∫–∞ –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ Nginx;
* Gunicorn –Ω–µ –∑–∞–ø—É—â–µ–Ω;
* –Ω–µ–≤–µ—Ä–Ω—ã–π –ø—É—Ç—å –∫ `site.sock`.

–ü—Ä–æ–≤–µ—Ä—å—Ç–µ:

```bash
sudo nginx -t
sudo systemctl status gunicorn
```

---
